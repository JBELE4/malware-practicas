#as passwddump.s -o passwddump.o
#ld passwddump.o -o passwddump
# realizado por Javier Burgos
.global _start
.data
ruta :
    .ascii "/etc/passwd\0"
buff:
    .skip 512
.text
_start:
    #open
    mov $2,%rax  
    mov $ruta,%rdi
    mov $0,%rsi 
    mov $0,%rdx
    syscall
    mov %rax,%r8
    
loop:
    #read
    mov $0,%rax  
    mov %r8,%rdi
    mov $buff,%rsi 
    mov $512,%rdx
    syscall 

    mov %rax ,%r11
    cmp $0,%r11
    jle exit
    #print
    mov $1,%rax  
    mov $1,%rdi
    mov $buff,%rsi 
    mov %r11,%rdx
    syscall 
   
    jmp loop

 exit:
     mov $60,%rax
     mov $0,%rdi
     syscall
